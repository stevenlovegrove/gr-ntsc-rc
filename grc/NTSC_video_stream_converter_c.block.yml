# auto-generated by grc.converter

id: NTSC_video_stream_converter_c
label: NTSC Video Stream Converter C++
category: NTSC

parameters:
-   id: samp_rate
    label: Sample Rate
    dtype: float
    default: samp_rate
-   id: decimation_factor
    label: Decimation Factor
    dtype: float
    default: samp_rate / (360 * 240 * 60)

inputs:
-   domain: stream
    dtype: float
-   domain: stream
    dtype: float
-   domain: stream
    dtype: float
-   domain: stream
    dtype: float

outputs:
-   domain: stream
    dtype: short

templates:
    imports: import NTSC
    make: NTSC.video_stream_converter_c(${samp_rate}, ${decimation_factor})

documentation: |-
    ------------ NTSC VIDEO STREAM CONVERTER C++ -----------
              This block converts input streams from "NTSC Decoder C++" to the suitable video stream for "Video SDL Link" and copes with the difference of rate.

      --- INPUTS ---
          * in0 : Control signal of NTSC states : synchronisation, equalising, ...
              Note : NTSC_configuration.h lists all states.
          * in1 : X = position of the pixel over the x-axis, from 0 to 360.
          * in2 : Y = position of the pixel over the y-axis, from 0 to 240.
          * in3 : BW = black and white level of the pixel : from black = 0 to white = 255.
              Note : Inputs 1, 2, 3 are equal to -1 unless control signal out0 = video.

      --- OUTPUT ---
          * out0 : grayscale level of the right pixel, from black = 0 to white = 255.
          As to dispaly the video correctly, the pixels order required by "Video SDL Sink" is handled by the decimation factor.

      --- PARAMETERS ---
          * Sample Rate : samp_rate.
          * Decimation factor : Sample rate from samp_rate to samp_rate / decimation.
              Note : decimation = samp_rate / (x_width - y_height - frame_rate) = samp_rate / (360 * 240 * 30).

      --- CODE DESCRIPTION ---
          The code processes inputs and output samples separately.
          On control signal in0 = video, input samples update the matrix representing the screen according to the pixel position and BW level.
          While the block outputs the right pixel BW level from the same matrix.

file_format: 1
